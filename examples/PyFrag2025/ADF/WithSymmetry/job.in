JOBSUB

#!/bin/bash
#SBATCH -N 1
#SBATCH -t 12:00:00
#SBATCH --ntasks-per-node=32
#SBATCH --partition=tc

echo "== Starting run at $(date)"
echo "== Job ID: ${SLURM_JOBID}"
echo "== Node list: ${SLURM_NODELIST}"
echo "== Submit dir. : ${SLURM_SUBMIT_DIR}"
echo "== Scratch dir. : ${TMPDIR}"

# TC
module load shared
module load ams/2025.103
export SCM_TMPDIR="/scratch/${SLURM_JOBID}"
srun mkdir -p ${SCM_TMPDIR}
srun chmod 733 ${SCM_TMPDIR}

# Snellius
# module load 2022
# module load AMS/2023.101-intelmpi
# module list

[postamble]
srun rm -rf ${SCM_TMPDIR}

JOBSUB END


PyFrag
name symmetry_job
coordfile $SLURM_SUBMIT_DIR/*xyz

frag1_indices  1-4 # Put here the atom indices of the first fragment (start with 1)
frag2_indices  5-7 # Put here the atom indices of the second fragment (start with 1)
frag1_energy   -194.83 # Put here the (optimized) energy of the first fragment (in kcal/mol)
frag2_energy   -317.86 # Put here the (optimized) energy of the second fragment (in kcal/mol)
bondlength     1 4 0.00
log_level debug

VDD 1 2 3 4 5 6 7
hirshfeld frag1 frag2

overlap frag1 HOMO frag2 LUMO
overlap frag2 HOMO frag1 LUMO
overlap AA frag1 4 AA frag2 3

orbitalenergy AA frag1 4
orbitalenergy AA frag2 3
orbitalenergy frag1 HOMO
orbitalenergy frag2 LUMO
orbitalenergy frag1 LUMO
orbitalenergy frag2 HOMO
orbitalenergy frag2 HOMO-2

population frag1 HOMO
population frag2 LUMO
population frag1 LUMO
population frag2 HOMO

PyFrag END

fragment2 EXTRA
System
  charge 0
End
fragment2 EXTRA END

AMS

Task SinglePoint

System
  charge 1
End

Engine adf
  basis
    core None
    type DZP
  End

#  eprint
#    sfo EIG OVL
#  End

  numericalquality normal

  xc
    gga OPBE
  End

  Symmetry C(S)
EndEngine

AMS END
