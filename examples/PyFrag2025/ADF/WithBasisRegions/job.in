JOBSUB

#!/bin/bash
#SBATCH -N 1
#SBATCH -t 12:00:00
#SBATCH --ntasks-per-node=32
#SBATCH --partition=tc

echo "== Starting run at $(date)"
echo "== Job ID: ${SLURM_JOBID}"
echo "== Node list: ${SLURM_NODELIST}"
echo "== Submit dir. : ${SLURM_SUBMIT_DIR}"
echo "== Scratch dir. : ${TMPDIR}"

# TC
module load shared
module load ams/2025.103
export SCM_TMPDIR="/scratch/${SLURM_JOBID}"
srun mkdir -p ${SCM_TMPDIR}
srun chmod 733 ${SCM_TMPDIR}

# Snellius
# module load 2022
# module load AMS/2023.101-intelmpi
# module list

[postamble]
srun rm -rf ${SCM_TMPDIR}

JOBSUB END

PyFrag
name job_regions
coordfile $SLURM_SUBMIT_DIR/*xyz
frag1_indices  5 # Put here the atom indices of the first fragment (start with 1)
frag2_indices  1-4 6 # Put here the atom indices of the second fragment (start with 1)
frag1_energy -89.21 # Put here the (optimized) energy of the first fragment (in kcal/mol)
frag2_energy -473.04 # Put here the (optimized) energy of the second fragment (in kcal/mol)
bondlength 1 5 0
bondlength 1 5 2.153
bondlength 1 2 1.0
# log_level DEBUG

VDD 1 2 3 4 5 6

overlap frag1 HOMO frag2 HOMO
overlap frag1 HOMO frag2 LUMO
overlap frag1 LUMO frag2 HOMO

orbitalenergy frag1 HOMO
orbitalenergy frag1 LUMO
orbitalenergy frag2 HOMO
orbitalenergy frag2 LUMO

PyFrag END

fragment1 EXTRA

System
  Charge -1
End

Engine ADF
  Symmetry NoSym
EndEngine

fragment1 EXTRA END

fragment2 EXTRA

# This is the system block in which you specify the charge of the molecule
System
  Charge 0
End

# Sometimes, you want to specify a specific symmetry, spin polarization, fragment occupations etc. which you can put in the ADF engine block
Engine ADF
  Symmetry NoSym
EndEngine

fragment2 EXTRA END


complex EXTRA

System
  Charge -1
End

Engine ADF
# The following option causes the SFO (symmetriced fragment orbitals) overlap matrix to be printed for solely the complex
  eprint
    sfo EIG OVL
  End
EndEngine

complex EXTRA END

AMS

Task SinglePoint

Engine ADF
  basis
    core None
    type AUG/ATZ2P
    PerRegion Region=I Type=QZ4P
    PerRegion Region=rest Type=AUG/ATZ2P
  End

  numericalquality Normal

  xc
    gga OLYP
  End

  Symmetry NoSym

  # Use this block for open-shell systems
  # Spinpolarization 0
  # UnrestrictedFragments
  # Unrestricted Yes/No

EndEngine

AMS END

